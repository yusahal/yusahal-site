---
import BaseLayout from "./BaseLayout.astro";

interface Props {
  title: string;
  description?: string;
  pubDate: Date;
  updatedDate?: Date;
  tags?: string[];
}

const { title, description, pubDate, updatedDate, tags = [] } = Astro.props;

function formatDate(date: Date): string {
  return date.toLocaleDateString("ja-JP", {
    year: "numeric",
    month: "long",
    day: "numeric",
  });
}
---

<BaseLayout title={title} description={description}>
  <article>
    <header class="mb-8">
      <h1 class="text-2xl font-bold mb-2">{title}</h1>
      <div class="text-sm text-gray-500 flex flex-wrap gap-x-4 gap-y-1">
        <time datetime={pubDate.toISOString()}>
          {formatDate(pubDate)}
        </time>
        {updatedDate && (
          <span>
            （更新: <time datetime={updatedDate.toISOString()}>{formatDate(updatedDate)}</time>）
          </span>
        )}
      </div>
      {tags.length > 0 && (
        <div class="mt-2 flex gap-2 flex-wrap">
          {tags.map((tag) => (
            <span class="text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded">
              {tag}
            </span>
          ))}
        </div>
      )}
    </header>
    <div class="blog-content">
      <slot />
    </div>
  </article>

  <div class="mt-12 pt-6 border-t border-gray-200">
    <a href="/blog/" class="text-sm text-gray-500 hover:text-gray-700 transition-colors">
      ← ブログ一覧に戻る
    </a>
  </div>
</BaseLayout>